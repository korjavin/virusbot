version: "3.8"

services:
  virusbot:
    # The image tag will be replaced by GitHub Actions workflow in the deploy branch
    image: ghcr.io/korjavin/virusbot:latest
    container_name: virusbot
    restart: unless-stopped
    environment:
      # Server connection
      - VIRUSBOT_SERVER_URL=${VIRUSBOT_SERVER_URL:-ws://localhost:8080/ws}
      - VIRUSBOT_NAME=${VIRUSBOT_NAME:-VirusBot}

      # Lobby settings
      - VIRUSBOT_LOBBY=${VIRUSBOT_LOBBY:-}
      - VIRUSBOT_AUTO_JOIN=${VIRUSBOT_AUTO_JOIN:-false}
      - VIRUSBOT_AUTO_CREATE=${VIRUSBOT_AUTO_CREATE:-false}

      # Bot behavior
      - VIRUSBOT_MOVE_DELAY=${VIRUSBOT_MOVE_DELAY:-500ms}
      - VIRUSBOT_DEBUG=${VIRUSBOT_DEBUG:-false}

      # Strategy settings
      - VIRUSBOT_STRATEGY=${VIRUSBOT_STRATEGY:-mcts}
      - VIRUSBOT_MCTS_ITERATIONS=${VIRUSBOT_MCTS_ITERATIONS:-1000}
      - VIRUSBOT_MCTS_TIME_LIMIT=${VIRUSBOT_MCTS_TIME_LIMIT:-1s}

      # Heuristic weights (if using heuristic strategy)
      - VIRUSBOT_WGT_TERRITORY=${VIRUSBOT_WGT_TERRITORY:-1.0}
      - VIRUSBOT_WGT_STRATEGIC=${VIRUSBOT_WGT_STRATEGIC:-0.5}
      - VIRUSBOT_WGT_THREAT=${VIRUSBOT_WGT_THREAT:-1.5}
      - VIRUSBOT_WGT_CONNECTIVITY=${VIRUSBOT_WGT_CONNECTIVITY:-0.3}
      - VIRUSBOT_WGT_EXPANSION=${VIRUSBOT_WGT_EXPANSION:-0.4}
      - VIRUSBOT_WGT_DEFENSIVE=${VIRUSBOT_WGT_DEFENSIVE:-0.2}
